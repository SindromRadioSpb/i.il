---
const apiBase = import.meta.env.PUBLIC_API_BASE_URL ?? 'http://127.0.0.1:8787';

let health: unknown = null;
try {
  const res = await fetch(`${apiBase}/api/v1/health`);
  if (res.ok) health = await res.json();
} catch {
  // Worker unreachable during build — page renders without live data
}
---

<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <title>News Hub (HE→RU)</title>
    <meta name="description" content="Русскоязычный хаб новостей из ивритоязычных источников." />
    <link rel="canonical" href={import.meta.env.PUBLIC_SITE_BASE_URL ?? ''} />
  </head>
  <body>
    <h1>News Hub (HE→RU)</h1>
    {health
      ? <p>Worker: <code>{JSON.stringify(health)}</code></p>
      : <p>Worker недоступен во время билда — данные появятся после деплоя.</p>
    }
    <p>Дальше здесь будет feed Stories.</p>
  </body>
</html>
